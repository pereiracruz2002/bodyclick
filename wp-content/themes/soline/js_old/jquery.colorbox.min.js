(function(b,ca){function d(a,e){a=a?' id="'+l+a+'"':"";return b("<div"+a+(e?' style="'+e+'"':"")+"/>")}function p(a,b){b="x"===b?m.width():m.height();return"string"===typeof a?Math.round(/%/.test(a)?b/100*parseInt(a,10):parseInt(a,10)):a}function L(K){return a.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(K)}function X(a){for(var e in a)b.isFunction(a[e])&&"on"!==e.substring(0,2)&&(a[e]=a[e].call(h));a.rel=a.rel||h.rel||"nofollow";a.href=a.href||b(h).attr("href");a.title=a.title||
h.title;return a}function u(a,e){e&&e.call(h);b.event.trigger(a)}function da(){var b,e=l+"Slideshow_",c="click."+l,d,k;a.slideshow&&i[1]&&(d=function(){A.text(a.slideshowStop).unbind(c).bind(M,function(){if(g<i.length-1||a.loop)b=setTimeout(f.next,a.slideshowSpeed)}).bind(N,function(){clearTimeout(b)}).one(c+" "+G,k);n.removeClass(e+"off").addClass(e+"on");b=setTimeout(f.next,a.slideshowSpeed)},k=function(){clearTimeout(b);A.text(a.slideshowStart).unbind([M,N,G,c].join(" ")).one(c,d);n.removeClass(e+
"on").addClass(e+"off")},a.slideshowAuto?d():k())}function Y(K){if(!H){h=K;a=X(b.extend({},b.data(h,r)));i=b(h);g=0;"nofollow"!==a.rel&&(i=b("."+B).filter(function(){return(b.data(this,r).rel||this.rel)===a.rel}),g=i.index(h),-1===g&&(i=i.add(h),g=i.length-1));if(!t){t=y=!0;n.show();if(a.returnFocus)try{h.blur(),b(h).one(Z,function(){try{this.focus()}catch(a){}})}catch(e){}o.css({opacity:+a.opacity,cursor:a.overlayClose?"pointer":"auto"}).show();a.w=p(a.initialWidth,"x");a.h=p(a.initialHeight,"y");
f.position(0);O&&m.bind("resize."+I+" scroll."+I,function(){o.css({width:m.width(),height:m.height(),top:m.scrollTop(),left:m.scrollLeft()})}).trigger("scroll."+I);u($,a.onOpen);P.add(C).add(D).add(A).add(Q).hide();R.html(a.close).show()}f.load(!0)}}var aa={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,photo:!1,href:!1,title:!1,rel:!1,opacity:0.9,
preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:!1,returnFocus:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0},r="colorbox",l="cbox",$=l+"_open",N=l+"_load",M=l+"_complete",G=l+"_cleanup",Z=l+"_closed",J=l+"_purge",ba=l+"_loaded",z=b.browser.msie&&!b.support.opacity,O=z&&
7>b.browser.version,I=l+"_IE6",o,n,v,j,S,T,U,V,i,m,k,E,F,Q,P,A,D,C,R,w,x,q,s,h,g,a,t,y,H=!1,f,B=l+"Element";f=b.fn[r]=b[r]=function(a,e){var c=this,d;if(!c[0]&&c.selector)return c;a=a||{};e&&(a.onComplete=e);if(!c[0]||void 0===c.selector)c=b("<a/>"),a.open=!0;c.each(function(){b.data(this,r,b.extend({},b.data(this,r)||aa,a));b(this).addClass(B)});d=a.open;b.isFunction(d)&&(d=d.call(c));d&&Y(c[0]);return c};f.init=function(){m=b(ca);n=d().attr({id:r,"class":z?l+"IE":""});o=d("Overlay",O?"position:absolute":
"").hide();v=d("Wrapper");j=d("Content").append(k=d("LoadedContent","width:0; height:0; overflow:hidden"),F=d("LoadingOverlay").add(d("LoadingGraphic")),Q=d("Title"),P=d("Current"),D=d("Next"),C=d("Previous"),A=d("Slideshow").bind($,da),R=d("Close"));v.append(d().append(d("TopLeft"),S=d("TopCenter"),d("TopRight")),d(!1,"clear:left").append(T=d("MiddleLeft"),j,U=d("MiddleRight")),d(!1,"clear:left").append(d("BottomLeft"),V=d("BottomCenter"),d("BottomRight"))).children().children().css({"float":"left"});
E=d(!1,"position:absolute; width:9999px; visibility:hidden; display:none");b("body").prepend(o,n.append(v,E));j.children().hover(function(){b(this).addClass("hover")},function(){b(this).removeClass("hover")}).addClass("hover");w=S.height()+V.height()+j.outerHeight(!0)-j.height();x=T.width()+U.width()+j.outerWidth(!0)-j.width();q=k.outerHeight(!0);s=k.outerWidth(!0);n.css({"padding-bottom":w,"padding-right":x}).hide();D.click(f.next);C.click(f.prev);R.click(f.close);j.children().removeClass("hover");
b("."+B).live("click",function(a){0!==a.button&&"undefined"!==typeof a.button||(a.ctrlKey||a.shiftKey||a.altKey)||(a.preventDefault(),Y(this))});o.click(function(){a.overlayClose&&f.close()});b(document).bind("keydown",function(b){t&&(a.escKey&&27===b.keyCode)&&(b.preventDefault(),f.close());if(t&&a.arrowKey&&!y&&i[1])if(37===b.keyCode&&(g||a.loop))b.preventDefault(),C.click();else if(39===b.keyCode&&(g<i.length-1||a.loop))b.preventDefault(),D.click()})};f.remove=function(){n.add(o).remove();b("."+
B).die("click").removeData(r).removeClass(B)};f.position=function(b,d){function c(a){S[0].style.width=V[0].style.width=j[0].style.width=a.style.width;F[0].style.height=F[1].style.height=j[0].style.height=T[0].style.height=U[0].style.height=a.style.height}var f,g=Math.max(document.documentElement.clientHeight-a.h-q-w,0)/2+m.scrollTop(),i=Math.max(m.width()-a.w-s-x,0)/2+m.scrollLeft();f=n.width()===a.w+s&&n.height()===a.h+q?0:b;v[0].style.width=v[0].style.height="9999px";n.dequeue().animate({width:a.w+
s,height:a.h+q,top:g,left:i},{duration:f,complete:function(){c(this);y=!1;v[0].style.width=a.w+s+x+"px";v[0].style.height=a.h+q+w+"px";d&&d()},step:function(){c(this)}})};f.resize=function(b){t&&(b=b||{},b.width&&(a.w=p(b.width,"x")-s-x),b.innerWidth&&(a.w=p(b.innerWidth,"x")),k.css({width:a.w}),b.height&&(a.h=p(b.height,"y")-q-w),b.innerHeight&&(a.h=p(b.innerHeight,"y")),!b.innerHeight&&!b.height&&(b=k.wrapInner("<div style='overflow:auto'></div>").children(),a.h=b.height(),b.replaceWith(b.children())),
k.css({height:a.h}),f.position("none"===a.transition?0:a.speed))};f.prep=function(h){function e(){a.w=a.w||k.width();a.w=a.mw&&a.mw<a.w?a.mw:a.w;return a.w}function c(){a.h=a.h||k.height();a.h=a.mh&&a.mh<a.h?a.mh:a.h;return a.h}function p(c){var d,e,h,j,q=i.length,s=a.loop;f.position(c,function(){function c(){z&&n[0].style.removeAttribute("filter")}if(t){z&&o&&k.fadeIn(100);k.show();u(ba);Q.show().html(a.title);if(1<q&&("string"===typeof a.current&&P.html(a.current.replace(/\{current\}/,g+1).replace(/\{total\}/,
q)).show(),D[s||g<q-1?"show":"hide"]().html(a.next),C[s||g?"show":"hide"]().html(a.previous),d=g?i[g-1]:i[q-1],h=g<q-1?i[g+1]:i[0],a.slideshow&&A.show(),a.preloading&&(j=b.data(h,r).href||h.href,e=b.data(d,r).href||d.href,j=b.isFunction(j)?j.call(h):j,e=b.isFunction(e)?e.call(d):e,L(j)&&(b("<img/>")[0].src=j),L(e))))b("<img/>")[0].src=e;F.hide();"fade"===a.transition?n.fadeTo(W,1,function(){c()}):c();m.bind("resize."+l,function(){f.position(0)});u(M,a.onComplete)}})}if(t){var o,W="none"===a.transition?
0:a.speed;m.unbind("resize."+l);k.remove();k=d("LoadedContent").html(h);k.hide().appendTo(E.show()).css({width:e(),overflow:a.scrolling?"auto":"hidden"}).css({height:c()}).prependTo(j);E.hide();b("#"+l+"Photo").css({cssFloat:"none",marginLeft:"auto",marginRight:"auto"});if(O)b("select").not(n.find("select")).filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one(G,function(){this.style.visibility="inherit"});"fade"===a.transition?n.fadeTo(W,0,function(){p(0)}):p(W)}};
f.load=function(j){var e,c,m,o=f.prep;y=!0;h=i[g];j||(a=X(b.extend({},b.data(h,r))));u(J);u(N,a.onLoad);a.h=a.height?p(a.height,"y")-q-w:a.innerHeight&&p(a.innerHeight,"y");a.w=a.width?p(a.width,"x")-s-x:a.innerWidth&&p(a.innerWidth,"x");a.mw=a.w;a.mh=a.h;a.maxWidth&&(a.mw=p(a.maxWidth,"x")-s-x,a.mw=a.w&&a.w<a.mw?a.w:a.mw);a.maxHeight&&(a.mh=p(a.maxHeight,"y")-q-w,a.mh=a.h&&a.h<a.mh?a.h:a.mh);e=a.href;F.show();a.inline?(d().hide().insertBefore(b(e)[0]).one(J,function(){b(this).replaceWith(k.children())}),
o(b(e))):a.iframe?(n.one(ba,function(){var c=b("<iframe frameborder='0' style='width:100%; height:100%; border:0; display:block'/>")[0];c.name=l+ +new Date;c.src=a.href;if(!a.scrolling)c.scrolling="no";if(z)c.allowtransparency="true";b(c).appendTo(k).one(J,function(){c.src="//about:blank"})}),o(" ")):a.html?o(a.html):L(e)?(c=new Image,c.onload=function(){var d;c.onload=null;c.id=l+"Photo";b(c).css({border:"none",display:"block",cssFloat:"left"});if(a.scalePhotos){m=function(){c.height=c.height-c.height*
d;c.width=c.width-c.width*d};if(a.mw&&c.width>a.mw){d=(c.width-a.mw)/c.width;m()}if(a.mh&&c.height>a.mh){d=(c.height-a.mh)/c.height;m()}}if(a.h)c.style.marginTop=Math.max(a.h-c.height,0)/2+"px";i[1]&&(g<i.length-1||a.loop)&&b(c).css({cursor:"pointer"}).click(f.next);if(z)c.style.msInterpolationMode="bicubic";setTimeout(function(){o(c)},1)},setTimeout(function(){c.src=e},1)):e&&E.load(e,function(a,c,d){o(c==="error"?"Request unsuccessful: "+d.statusText:b(this).children())})};f.next=function(){y||
(g=g<i.length-1?g+1:0,f.load())};f.prev=function(){y||(g=g?g-1:i.length-1,f.load())};f.close=function(){t&&!H&&(H=!0,t=!1,u(G,a.onCleanup),m.unbind("."+l+" ."+I),o.fadeTo("fast",0),n.stop().fadeTo("fast",0,function(){u(J);k.remove();n.add(o).css({opacity:1,cursor:"auto"}).hide();setTimeout(function(){H=!1;u(Z,a.onClosed)},1)}))};f.element=function(){return b(h)};f.settings=aa;b(f.init)})(jQuery,this);